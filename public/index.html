<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Controle de Auditoria de AIH</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Tela Login -->
        <div id="telaLogin" class="tela ativa">
            <div class="login-container">
                <h1>Sistema de Gest√£o de AIH</h1>
                <h2>Controle de Auditoria</h2>
                <form id="formLogin">
                    <input type="text" id="loginUsuario" placeholder="Usu√°rio" required>
                    <input type="password" id="loginSenha" placeholder="Senha" required>
                    <button type="submit">Entrar</button>
                    <a href="#" id="linkGerenciarUsuarios" style="display: block; text-align: center; margin-top: 1rem; color: var(--primary); text-decoration: none; font-weight: 500;">Gerenciar Usu√°rios</a>
                </form>
                <footer class="login-footer">
                    <p>Desenvolvido por Gustavo Cambraia</p>
                    <p>All rights reserved</p>
                    <p>Vers√£o atual: 3.4</p>
                </footer>
            </div>
        </div>

        <!-- Tela Administra√ß√£o de Usu√°rios -->
        <div id="telaAdminUsuarios" class="tela">
            <div class="login-container">
                <h1>Administra√ß√£o de Usu√°rios</h1>
                <h2>Login de Administrador</h2>
                <form id="formLoginAdmin">
                    <input type="text" id="adminUsuario" placeholder="Admin" required>
                    <input type="password" id="adminSenha" placeholder="Senha Admin" required>
                    <button type="submit">Entrar como Admin</button>
                    <a href="#" id="linkVoltarLogin">‚Üê Voltar ao Login</a>
                </form>
            </div>
        </div>

        <!-- Tela Gest√£o de Usu√°rios -->
        <div id="telaGestaoUsuarios" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarLogin()">‚Üê Sair da Administra√ß√£o</button>
                <h2>Gest√£o de Usu√°rios</h2>
            </header>
            <div class="container">
                <!-- Lista de usu√°rios existentes -->
                <div class="config-section">
                    <h3>üë• Usu√°rios Cadastrados</h3>
                    <div id="listaUsuarios"></div>
                </div>

                <!-- Formul√°rio para adicionar novo usu√°rio -->
                <div class="config-section">
                    <h3>‚ûï Adicionar Novo Usu√°rio</h3>
                    <form id="formNovoUsuario">
                        <label>Nome de Usu√°rio:</label>
                        <input type="text" id="novoUsuarioNome" placeholder="Nome do usu√°rio" required>

                        <label>N√∫mero de Matr√≠cula:</label>
                        <input type="text" id="novoUsuarioMatricula" placeholder="Matr√≠cula" required>

                        <label>Senha:</label>
                        <input type="password" id="novoUsuarioSenha" placeholder="Senha inicial" required>

                        <button type="submit">Adicionar Usu√°rio</button>
                    </form>
                </div>

                <!-- Alterar senha do administrador -->
                <div class="config-section">
                    <h3>üîí Alterar Senha do Administrador</h3>
                    <form id="formAlterarSenhaAdmin">
                        <label>Nova Senha do Admin:</label>
                        <input type="password" id="novaSenhaAdmin" placeholder="Nova senha" required>

                        <label>Confirmar Senha:</label>
                        <input type="password" id="confirmarSenhaAdmin" placeholder="Confirmar nova senha" required>

                        <button type="submit">Alterar Senha</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Substitua a se√ß√£o do dashboard na TELA PRINCIPAL pelo c√≥digo abaixo -->

<!-- Tela Principal com menu no topo -->
<div id="telaPrincipal" class="tela">
    <header>
        <h1>Sistema de Controle de AIH</h1>
        <div class="user-info">
            <span id="nomeUsuario"></span>
            <button id="btnSair">Sair</button>
        </div>
    </header>

    <!-- Menu Principal no topo -->
    <div class="menu-principal">
        <button class="menu-btn" id="btnInformarAIH">
            <span class="icon">üìù</span>
            <span>Informar AIH</span>
        </button>
        <button class="menu-btn" id="btnBuscarAIH">
            <span class="icon">üîç</span>
            <span>Buscar AIH</span>
        </button>
        <button class="menu-btn" id="btnBackup">
            <span class="icon">üíæ</span>
            <span>Backup/Exportar</span>
        </button>
        <button class="menu-btn" id="btnConfiguracoes">
            <span class="icon">‚öôÔ∏è</span>
            <span>Configura√ß√µes</span>
        </button>
        <button class="menu-btn" id="btnRelatorios">
            <span class="icon">üìä</span>
            <span>Relat√≥rios</span>
        </button>
        <button class="menu-btn" id="btnAlterarBD">
            <span class="icon">‚ö†Ô∏è</span>
            <span>Alterar BD</span>
        </button>
    </div>

    <!-- O seletor de compet√™ncia ser√° inserido dinamicamente aqui pelo JavaScript -->

    <div class="dashboard">
        <!-- Os cards ser√£o inseridos dinamicamente pelo JavaScript -->
    </div>

    <!-- O resumo financeiro ser√° inserido dinamicamente aqui pelo JavaScript -->

    </div>
        <!-- Tela Informar AIH -->
        <div id="telaInformarAIH" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaPrincipal()">‚Üê Voltar</button>
                <h2>Informar AIH</h2>
            </header>
            <div class="container">
                <form id="formBuscarAIH">
                    <label>N√∫mero da AIH:</label>
                    <input type="text" id="numeroBuscarAIH" required>
                    <button type="submit">Buscar</button>
                </form>
            </div>
        </div>

        <!-- Tela Cadastro AIH -->
        <div id="telaCadastroAIH" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaAnterior()">‚Üê Voltar</button>
                <h2>Cadastrar Nova AIH</h2>
            </header>
            <div class="container">
                <form id="formCadastroAIH">
                    <label>N√∫mero da AIH:</label>
                    <input type="text" id="cadastroNumeroAIH" required>

                    <label>N√∫meros de Atendimento:</label>
                    <div id="atendimentosContainer">
                        <input type="text" class="atendimento-input" placeholder="N√∫mero do atendimento">
                    </div>
                    <button type="button" id="btnAddAtendimento">+ Adicionar Atendimento</button>

                    <label>Compet√™ncia (MM/AAAA):</label>
                    <input type="text" id="cadastroCompetencia" pattern="\d{2}/\d{4}" placeholder="12/2024" required>

                    <label>Valor Inicial:</label>
                    <input type="number" id="cadastroValor" step="0.01" required>

                    <button type="submit">Cadastrar AIH</button>
                </form>
            </div>
        </div>

        <!-- Tela Informa√ß√µes AIH -->
        <div id="telaInfoAIH" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaPrincipal()">‚Üê Voltar</button>
                <h2>Informa√ß√µes da AIH</h2>
            </header>
            <div class="container">
                <div id="infoAIHContent">
                    <!-- Conte√∫do din√¢mico -->
                </div>
                <button id="btnNovaMovimentacao" class="btn-primary">Nova Movimenta√ß√£o</button>
            </div>
        </div>

        <!-- Tela Movimenta√ß√£o -->
        <div id="telaMovimentacao" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaAnterior()">‚Üê Voltar</button>
                <h2>üìù Nova Movimenta√ß√£o</h2>
            </header>
            <div class="container">
                <!-- Status atual da AIH destacado -->
                <div id="statusAtualAIH"></div>

                <!-- √Årea de explica√ß√£o da movimenta√ß√£o -->
                <div id="explicacaoMovimentacao"></div>

                <!-- Lembrete sobre os status com design melhorado -->
                <div class="status-guia-completo">
                    <h4>üìã Guia Completo dos Status de AIH</h4>
                    <div class="status-grid-detalhado">
                        <div class="status-card status-1-card">
                            <div class="status-header">
                                <span class="status-numero">1</span>
                                <h5>‚úÖ Finalizada - Aprova√ß√£o Direta</h5>
                            </div>
                            <p><strong>Significado:</strong> Auditoria do SUS aprovou diretamente a conta sem glosas ou pend√™ncias.</p>
                            <p><strong>A√ß√£o:</strong> Processo conclu√≠do com sucesso. Concord√¢ncia entre auditorias.</p>
                        </div>

                        <div class="status-card status-2-card">
                            <div class="status-header">
                                <span class="status-numero">2</span>
                                <h5>üîÑ Ativa - Aprova√ß√£o Indireta</h5>
                            </div>
                            <p><strong>Significado:</strong> Auditoria SUS aprovou, por√©m com pend√™ncias e/ou glosas. Cabe recurso a ser apresentado pela Auditoria do Hospital.</p>
                            <p><strong>A√ß√£o:</strong> Conta ja auditada pela Auditoria do SUS, por√©m com status de ativa por possibilidade de retorno com recurso solicitado pela auditoria do hospital.</p>
                        </div>

                        <div class="status-card status-3-card">
                            <div class="status-header">
                                <span class="status-numero">3</span>
                                <h5>‚ö†Ô∏è Ativa - Em Discuss√£o</h5>
                            </div>
                            <p><strong>Significado:</strong> H√° diverg√™ncias entre auditorias que precisam ser resolvidas antes da aprova√ß√£o desta conta.</p>
                            <p><strong>A√ß√£o:</strong> Resolu√ß√£o de pend√™ncias e glosas em andamento entre as Auditorias.</p>
                        </div>

                        <div class="status-card status-4-card">
                            <div class="status-header">
                                <span class="status-numero">4</span>
                                <h5>‚úÖ Finalizada - Ap√≥s Discuss√£o</h5>
                            </div>
                            <p><strong>Significado:</strong> Discuss√µes conclu√≠das entre ambas auditorias. AIH finalizada.</p>
                            <p><strong>A√ß√£o:</strong> Processo conclu√≠do ap√≥s concord√¢ncia entre as auditorias.</p>
                        </div>
                    </div>
                </div>

                <form id="formMovimentacao" class="form-movimentacao-melhorado">
                    <div class="form-section">
                        <h3>üìä Informa√ß√µes da Movimenta√ß√£o</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label>üéØ Status da AIH:</label>
                                <select id="movStatus" required>
                                    <option value="">Selecione o status</option>
                                    <option value="1">‚úÖ Status 1 - Finalizada com aprova√ß√£o direta</option>
                                    <option value="2">üîÑ Status 2 - Ativa com aprova√ß√£o indireta</option>
                                    <option value="3">‚ö†Ô∏è Status 3 - Ativa em discuss√£o</option>
                                    <option value="4">‚úÖ Status 4 - Finalizada ap√≥s discuss√£o</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>üîÑ Tipo de Movimenta√ß√£o:</label>
                                <select id="movTipo" required>
                                    <option value="">Selecione o tipo</option>
                                    <option value="entrada_sus">üì• Entrada na Auditoria SUS</option>
                                    <option value="saida_hospital">üì§ Sa√≠da para Auditoria Hospital</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>üìÖ Compet√™ncia (MM/AAAA):</label>
                                <input type="text" id="movCompetencia" pattern="\d{2}/\d{4}" placeholder="06/2025">
                            </div>

                            <div class="form-group">
                                <label>üí∞ Valor Atual da Conta:</label>
                                <input type="number" id="movValor" step="0.01" placeholder="0.00" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>üë®‚Äç‚öïÔ∏è Profissionais Auditores</h3>
                        <p class="form-subtitle">Selecione os profissionais respons√°veis pela auditoria desta movimenta√ß√£o</p>

                        <div class="profissionais-grid">
                            <div class="profissional-grupo">
                                <label>ü©∫ Medicina:</label>
                                <select id="movProfMedicina">
                                    <option value="">Selecione - Medicina</option>
                                </select>
                            </div>

                            <div class="profissional-grupo">
                                <label>üíâ Enfermagem:</label>
                                <select id="movProfEnfermagem">
                                    <option value="">Selecione - Enfermagem</option>
                                </select>
                            </div>

                            <div class="profissional-grupo">
                                <label>üèÉ‚Äç‚ôÇÔ∏è Fisioterapia:</label>
                                <select id="movProfFisioterapia">
                                    <option value="">Selecione - Fisioterapia</option>
                                </select>
                            </div>

                            <div class="profissional-grupo">
                                <label>ü¶∑ Cirurgi√£o Bucomaxilo:</label>
                                <select id="movProfBucomaxilo">
                                    <option value="">Selecione - Bucomaxilo</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>üìù Observa√ß√µes</h3>
                        <textarea id="movObservacoes" rows="4" placeholder="Digite observa√ß√µes importantes sobre esta movimenta√ß√£o (opcional)..."></textarea>
                    </div>

                    <div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;">
                            <h3 style="color: #92400e; margin: 0; font-size: 1.125rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
                                ‚ö†Ô∏è Glosas e Pend√™ncias
                            </h3>
                            <button type="button" id="btnGerenciarGlosas" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; margin: 0;">
                                üìã Gerenciar Glosas
                            </button>
                        </div>
                        <div id="listaGlosas" style="background: white; border-radius: 8px; padding: 1rem; min-height: 60px; border: 1px solid #fbbf24;"></div>
                    </div>

                    <div class="form-buttons">
                        <button type="button" id="btnCancelarMovimentacao" class="btn-cancelar">
                            ‚ùå Cancelar
                        </button>
                        <button type="submit" class="btn-salvar">
                            üíæ Salvar Movimenta√ß√£o
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Tela Pend√™ncias -->
        <div id="telaPendencias" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaAnterior()">‚Üê Voltar</button>
                <h2>‚ö†Ô∏è Gerenciar Pend√™ncias/Glosas</h2>
            </header>
            <div class="container">
                <!-- Glosas Atuais -->
                <div class="config-section">
                    <h3>üìã Glosas/Pend√™ncias Atuais</h3>
                    <div id="glosasAtuais"></div>
                </div>

                <!-- Formul√°rio para Adicionar Nova Glosa -->
                <div class="config-section">
                    <h3>‚ûï Adicionar Nova Pend√™ncia/Glosa</h3>
                    <form id="formNovaGlosa" style="display: grid; gap: 1rem;">
                        <div>
                            <label>üìç Linha da Pend√™ncia/Glosa:</label>
                            <input type="text" id="glosaLinha" placeholder="Ex: Linha 10, Item 5, etc." required style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 6px;">
                        </div>

                        <div>
                            <label>üè∑Ô∏è Tipo de Pend√™ncia/Glosa:</label>
                            <select id="glosaTipo" required style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 6px;">
                                <option value="">Selecione o tipo de pend√™ncia/glosa</option>
                            </select>
                        </div>

                        <div>
                            <label>üë®‚Äç‚öïÔ∏è Profissional Respons√°vel:</label>
                            <select id="glosaProfissional" required style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 6px;">
                                <option value="">Selecione o profissional</option>
                            </select>
                        </div>

                        <div>
                            <label>üìä Quantidade:</label>
                            <input type="number" id="glosaQuantidade" placeholder="Quantidade" min="1" value="1" required style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 6px;">
                        </div>

                        <button type="submit" class="btn-primary" style="padding: 1rem; font-size: 1rem;">
                            ‚ûï Adicionar Pend√™ncia/Glosa
                        </button>
                    </form>
                </div>

                <div style="margin-top: 2rem; text-align: center;">
                    <button id="btnSalvarGlosas" class="btn-success" style="padding: 1rem 2rem; font-size: 1.1rem;">
                        üíæ Salvar Pend√™ncias e Voltar
                    </button>
                </div>
            </div>
        </div>

        <!-- Tela Pesquisa -->
        <div id="telaPesquisa" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaPrincipal()">‚Üê Voltar</button>
                <h2>üîç Pesquisar AIH</h2>
            </header>
            <div class="container">
                <!-- Busca R√°pida -->
                <div class="busca-rapida">
                    <h3>üöÄ Busca R√°pida</h3>
                    <div class="busca-rapida-grid">
                        <div class="busca-card">
                            <label>üè• N√∫mero da AIH:</label>
                            <input type="text" id="buscaRapidaAIH" placeholder="Digite o n√∫mero da AIH" class="busca-input">
                            <button type="button" onclick="buscarPorAIH()" class="btn-busca">Buscar AIH</button>
                        </div>
                        <div class="busca-card">
                            <label>üìã N√∫mero de Atendimento:</label>
                            <input type="text" id="buscaRapidaAtendimento" placeholder="Digite o n√∫mero do atendimento" class="busca-input">
                            <button type="button" onclick="buscarPorAtendimento()" class="btn-busca">Buscar por Atendimento</button>
                        </div>
                    </div>
                </div>

                <!-- Pesquisa Avan√ßada -->
                <div class="pesquisa-avancada">
                    <h3>üîé Pesquisa Avan√ßada</h3>
                    <form id="formPesquisa">
                        <div class="filtros-grid">
                            <div class="filtro-item">
                                <label>üè• N√∫mero AIH:</label>
                                <input type="text" id="pesquisaNumeroAIH" placeholder="Buscar por n√∫mero">
                            </div>

                            <div class="filtro-item">
                                <label>üìã N√∫mero de Atendimento:</label>
                                <input type="text" id="pesquisaNumeroAtendimento" placeholder="Buscar por atendimento">
                            </div>

                            <div class="filtro-item">
                                <label>üìä Status:</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label"><input type="checkbox" name="status" value="1"> <span class="status-badge status-1">Finalizada com aprova√ß√£o direta</span></label>
                                    <label class="checkbox-label"><input type="checkbox" name="status" value="2"> <span class="status-badge status-2">Ativa com aprova√ß√£o indireta</span></label>
                                    <label class="checkbox-label"><input type="checkbox" name="status" value="3"> <span class="status-badge status-3">Ativa em discuss√£o</span></label>
                                    <label class="checkbox-label"><input type="checkbox" name="status" value="4"> <span class="status-badge status-4">Finalizada ap√≥s discuss√£o</span></label>
                                </div>
                            </div>

                            <div class="filtro-item">
                                <label>üìÖ Per√≠odo:</label>
                                <div class="periodo-inputs">
                                    <input type="date" id="pesquisaDataInicio" placeholder="Data in√≠cio">
                                    <span class="periodo-separador">at√©</span>
                                    <input type="date" id="pesquisaDataFim" placeholder="Data fim">
                                </div>
                            </div>

                            <div class="filtro-item">
                                <label>üìÜ Compet√™ncia:</label>
                                <input type="text" id="pesquisaCompetencia" pattern="\d{2}/\d{4}" placeholder="MM/AAAA">
                            </div>

                            <div class="filtro-item">
                                <label>üí∞ Faixa de Valores:</label>
                                <div class="valor-inputs">
                                    <input type="number" id="pesquisaValorMin" step="0.01" placeholder="Valor m√≠nimo">
                                    <span class="valor-separador">at√©</span>
                                    <input type="number" id="pesquisaValorMax" step="0.01" placeholder="Valor m√°ximo">
                                </div>
                            </div>

                            <div class="filtro-item">
                                <label>üë®‚Äç‚öïÔ∏è Profissional:</label>
                                <select id="pesquisaProfissional">
                                    <option value="">Todos os profissionais</option>
                                </select>
                            </div>
                        </div>

                        <div class="botoes-pesquisa">
                            <button type="button" onclick="limparFiltros()" class="btn-limpar">üóëÔ∏è Limpar Filtros</button>
                            <button type="submit" class="btn-pesquisar">üîç Pesquisar</button>
                        </div>
                    </form>
                </div>

                <!-- Resultados da Pesquisa -->
                <div id="resultadosPesquisa"></div>
            </div>
        </div>

        <!-- Tela Configura√ß√µes -->
        <div id="telaConfiguracoes" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaPrincipal()">‚Üê Voltar</button>
                <h2>Configura√ß√µes</h2>
            </header>
            <div class="container">
                <div class="config-section">
                    <h3>Gerenciar Profissionais</h3>
                    <div id="listaProfissionais"></div>
                    <form id="formNovoProfissional">
                        <input type="text" id="profNome" placeholder="Nome" required>
                        <select id="profEspecialidade" required>
                            <option value="Medicina">Medicina</option>
                            <option value="Enfermagem">Enfermagem</option>
                            <option value="Fisioterapia">Fisioterapia</option>
                            <option value="Bucomaxilo">Cirurgi√£o Bucomaxilo</option>
                        </select>
                        <button type="submit">Adicionar Profissional</button>
                    </form>
                </div>

                <div class="config-section">
                    <h3>Gerenciar Tipos de Pend√™ncias/Glosas</h3>
                    <div id="listaTiposGlosa"></div>
                    <form id="formNovoTipoGlosa">
                        <input type="text" id="tipoGlosaDescricao" placeholder="Descri√ß√£o do tipo de pend√™ncia/glosa" required>
                        <button type="submit">Adicionar Tipo</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Tela Alterar Base de Dados -->
        <div id="telaAlterarBD" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaPrincipal()">‚Üê Voltar</button>
                <h2>‚ö†Ô∏è Altera√ß√£o da Base de Dados</h2>
            </header>
            <div class="container">
                <div style="background: #fef2f2; border: 2px solid #dc2626; border-radius: 12px; padding: 2rem; margin-bottom: 2rem; text-align: center;">
                    <h3 style="color: #dc2626; margin-bottom: 1rem;">‚ö†Ô∏è ATEN√á√ÉO - √ÅREA RESTRITA</h3>
                    <p style="color: #dc2626; font-weight: 600; margin: 0;">
                        As opera√ß√µes desta se√ß√£o s√£o IRREVERS√çVEIS e afetam permanentemente a base de dados.<br>
                        Use com extrema cautela e apenas quando absolutamente necess√°rio.
                    </p>
                </div>

                <!-- Deletar Movimenta√ß√£o -->
                <div class="config-section" style="border: 2px solid #f59e0b; border-radius: 12px; padding: 2rem; margin-bottom: 2rem; background: #fffbeb;">
                    <h3 style="color: #92400e;">üóëÔ∏è Deletar Movimenta√ß√£o</h3>
                    <p style="color: #92400e; margin-bottom: 1.5rem;">Remove completamente uma movimenta√ß√£o espec√≠fica da base de dados.</p>

                    <form id="formDeletarMovimentacao" style="display: grid; gap: 1rem;">
                        <div>
                            <label style="font-weight: 600; color: #92400e;">N√∫mero da AIH:</label>
                            <input type="text" id="aihMovimentacao" placeholder="Digite o n√∫mero da AIH" required style="width: 100%; padding: 0.75rem; border: 2px solid #f59e0b; border-radius: 6px;">
                        </div>

                        <div>
                            <label style="font-weight: 600; color: #92400e;">Movimenta√ß√µes Dispon√≠veis:</label>
                            <div id="listaMovimentacoes" style="min-height: 100px; border: 2px solid #f59e0b; border-radius: 6px; padding: 1rem; background: white;">
                                <p style="color: #64748b; text-align: center; margin: 0;">Informe o n√∫mero da AIH para carregar as movimenta√ß√µes</p>
                            </div>
                        </div>

                        <div>
                            <label style="font-weight: 600; color: #92400e;">Justificativa (Obrigat√≥ria):</label>
                            <textarea id="justificativaMovimentacao" rows="4" placeholder="Descreva detalhadamente o motivo desta exclus√£o..." required style="width: 100%; padding: 0.75rem; border: 2px solid #f59e0b; border-radius: 6px; resize: vertical;"></textarea>
                        </div>

                        <button type="submit" style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); color: white; border: none; padding: 1rem 2rem; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1rem;">
                            üóëÔ∏è Deletar Movimenta√ß√£o
                        </button>
                    </form>
                </div>

                <!-- Deletar AIH -->
                <div class="config-section" style="border: 2px solid #dc2626; border-radius: 12px; padding: 2rem; background: #fef2f2;">
                    <h3 style="color: #dc2626;">üíÄ Deletar AIH Completa</h3>
                    <p style="color: #dc2626; margin-bottom: 1.5rem;">Remove completamente uma AIH e TODOS os seus dados relacionados da base de dados.</p>

                    <form id="formDeletarAIH" style="display: grid; gap: 1rem;">
                        <div>
                            <label style="font-weight: 600; color: #dc2626;">N√∫mero da AIH:</label>
                            <input type="text" id="aihCompleta" placeholder="Digite o n√∫mero da AIH" required style="width: 100%; padding: 0.75rem; border: 2px solid #dc2626; border-radius: 6px;">
                        </div>

                        <div>
                            <label style="font-weight: 600; color: #dc2626;">Informa√ß√µes da AIH:</label>
                            <div id="infoAIHDeletar" style="min-height: 100px; border: 2px solid #dc2626; border-radius: 6px; padding: 1rem; background: white;">
                                <p style="color: #64748b; text-align: center; margin: 0;">Informe o n√∫mero da AIH para carregar as informa√ß√µes</p>
                            </div>
                        </div>

                        <div>
                            <label style="font-weight: 600; color: #dc2626;">Justificativa (Obrigat√≥ria):</label>
                            <textarea id="justificativaAIH" rows="4" placeholder="Descreva detalhadamente o motivo desta exclus√£o..." required style="width: 100%; padding: 0.75rem; border: 2px solid #dc2626; border-radius: 6px; resize: vertical;"></textarea>
                        </div>

                        <button type="submit" style="background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%); color: white; border: none; padding: 1rem 2rem; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1rem;">
                            üíÄ Deletar AIH Completa
                        </button>
                    </form>
                </div>

                <!-- Logs de Exclus√£o -->
                <div class="config-section" style="border: 2px solid #6366f1; border-radius: 12px; padding: 2rem; background: #f0f9ff;">
                    <h3 style="color: #1e40af;">üìã Hist√≥rico de Exclus√µes</h3>
                    <p style="color: #1e40af; margin-bottom: 1.5rem;">Registro das √∫ltimas exclus√µes realizadas no sistema (√∫ltimos 50 registros).</p>

                    <div style="margin-bottom: 1rem;">
                        <button onclick="carregarLogsExclusao()" 
                                style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); 
                                       color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; 
                                       cursor: pointer; font-weight: 600; transition: all 0.2s ease;"
                                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.2)'"
                                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                            üîÑ Carregar Logs de Exclus√£o
                        </button>
                    </div>

                    <div id="containerLogsExclusao" style="min-height: 200px; border: 2px solid #93c5fd; border-radius: 8px; padding: 1rem; background: white;">
                        <p style="color: #64748b; text-align: center; margin: 0;">Clique em "Carregar Logs de Exclus√£o" para visualizar o hist√≥rico</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal de Confirma√ß√£o de Exclus√£o -->
        <div id="modalConfirmacaoExclusao" class="modal">
            <div class="modal-content" style="max-width: 500px;">
                <h3 style="color: #dc2626; margin-bottom: 1rem;">‚ö†Ô∏è CONFIRMA√á√ÉO DE EXCLUS√ÉO</h3>
                <div id="detalhesExclusao" style="background: #fef2f2; border: 1px solid #dc2626; border-radius: 6px; padding: 1rem; margin-bottom: 1.5rem;">
                    <!-- Detalhes ser√£o preenchidos dinamicamente -->
                </div>

                <div style="background: #fffbeb; border: 1px solid #f59e0b; border-radius: 6px; padding: 1rem; margin-bottom: 1.5rem;">
                    <p style="color: #92400e; font-weight: 600; margin: 0;">
                        ‚ö†Ô∏è Esta a√ß√£o √© IRREVERS√çVEL. Digite sua senha para confirmar:
                    </p>
                </div>

                <div style="margin-bottom: 1.5rem;">
                    <label style="font-weight: 600; color: #374151;">Sua senha:</label>
                    <input type="password" id="senhaConfirmacao" placeholder="Digite sua senha" required style="width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 6px; margin-top: 0.5rem;">
                </div>

                <div class="modal-buttons">
                    <button onclick="cancelarExclusao()" style="background: #64748b; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 6px; cursor: pointer;">
                        Cancelar
                    </button>
                    <button onclick="confirmarExclusao()" style="background: #dc2626; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 6px; cursor: pointer; font-weight: 600;">
                        Confirmar Exclus√£o
                    </button>
                </div>
            </div>
        </div>

        <!-- Tela Relat√≥rios -->
        <div id="telaRelatorios" class="tela">
            <header>
                <button class="btn-voltar" onclick="mostrarTela('telaPrincipal')">‚Üê Voltar</button>
                <h2>Relat√≥rios e An√°lises</h2>
            </header>
            <div class="container">
                <!-- Filtros Globais de Per√≠odo -->
                <div style="background: #f8fafc; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                    <h3 style="margin-top: 0;">üîç Filtros de Per√≠odo</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div>
                            <label>Data In√≠cio:</label>
                            <input type="date" id="relatorioDataInicio">
                        </div>
                        <div>
                            <label>Data Fim:</label>
                            <input type="date" id="relatorioDataFim">
                        </div>
                        <div>
                            <label>Compet√™ncia (MM/AAAA):</label>
                            <input type="text" id="relatorioCompetencia" placeholder="Ex: 06/2025" pattern="\d{2}/\d{4}">
                        </div>
                        <div style="display: flex; align-items: end;">
                            <button onclick="limparFiltrosRelatorio()" class="btn-secondary" style="width: 100%;">
                                üóëÔ∏è Limpar Filtros
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Relat√≥rios por Categoria -->
                <div style="margin-bottom: 2rem;">
                    <h3>üìä An√°lises de Fluxo e Movimenta√ß√£o</h3>
                    <div class="relatorios-grid">
                        <button onclick="gerarRelatorio('fluxo-movimentacoes')" class="card-relatorio">
                            <h4>Fluxo de Movimenta√ß√µes</h4>
                            <p>Entradas SUS vs Sa√≠das Hospital por per√≠odo</p>
                        </button>

                        <button onclick="gerarRelatorio('analise-temporal-cadastros')" class="card-relatorio">
                            <h4>An√°lise Temporal</h4>
                            <p>Cadastros e finaliza√ß√µes por per√≠odo</p>
                        </button>

                        <button onclick="gerarRelatorio('eficiencia-processamento')" class="card-relatorio">
                            <h4>Efici√™ncia de Processamento</h4>
                            <p>Tempo m√©dio de processamento das AIHs</p>
                        </button>

                        <button onclick="gerarRelatorio('comparativo-auditorias')" class="card-relatorio">
                            <h4>Comparativo entre Auditorias</h4>
                            <p>An√°lise entre auditoria SUS e Hospital</p>
                        </button>
                    </div>
                </div>

                <div style="margin-bottom: 2rem;">
                    <h3>üë• An√°lises de Profissionais</h3>
                    <div class="relatorios-grid">
                        <button onclick="gerarRelatorio('produtividade-auditores')" class="card-relatorio">
                            <h4>Produtividade dos Auditores</h4>
                            <p>An√°lise detalhada por profissional e especialidade</p>
                        </button>

                        <button onclick="gerarRelatorio('aihs-profissional-periodo')" class="card-relatorio">
                            <h4>AIHs por Profissional</h4>
                            <p>Auditoria realizada por per√≠odo</p>
                        </button>

                        <button onclick="gerarRelatorio('glosas-profissional-periodo')" class="card-relatorio">
                            <h4>Glosas por Profissional</h4>
                            <p>An√°lise de glosas por auditor</p>
                        </button>

                        <button onclick="gerarRelatorio('cruzamento-profissional-glosas')" class="card-relatorio">
                            <h4>Cruzamento Profissional x Glosas</h4>
                            <p>Rela√ß√£o entre auditores e tipos de glosa</p>
                        </button>
                    </div>
                </div>

                <div style="margin-bottom: 2rem;">
                    <h3>üí∞ An√°lises Financeiras</h3>
                    <div class="relatorios-grid">
                        <button onclick="gerarRelatorio('analise-valores-glosas')" class="card-relatorio">
                            <h4>An√°lise de Valores e Glosas</h4>
                            <p>Impacto financeiro das glosas</p>
                        </button>

                        <button onclick="gerarRelatorio('valores-glosas-periodo')" class="card-relatorio">
                            <h4>Valores por Per√≠odo</h4>
                            <p>An√°lise financeira detalhada</p>
                        </button>

                        <button onclick="gerarRelatorio('analise-financeira')" class="card-relatorio">
                            <h4>An√°lise Financeira Completa</h4>
                            <p>Valores iniciais vs finais, perdas e ganhos</p>
                        </button>

                        <button onclick="gerarRelatorio('distribuicao-valores')" class="card-relatorio">
                            <h4>Distribui√ß√£o de Valores</h4>
                            <p>Faixas de valores das AIHs</p>
                        </button>
                    </div>
                </div>

                <div style="margin-bottom: 2rem;">
                    <h3>‚ö†Ô∏è An√°lises de Glosas e Pend√™ncias</h3>
                    <div class="relatorios-grid">
                        <button onclick="gerarRelatorio('ranking-glosas-frequentes')" class="card-relatorio">
                            <h4>Ranking de Glosas</h4>
                            <p>Glosas mais frequentes e impactantes</p>
                        </button>

                        <button onclick="gerarRelatorio('tipos-glosa-periodo')" class="card-relatorio">
                            <h4>Tipos de Glosa por Per√≠odo</h4>
                            <p>Evolu√ß√£o dos tipos de glosa</p>
                        </button>

                        <button onclick="gerarRelatorio('detalhamento-status')" class="card-relatorio">
                            <h4>Detalhamento por Status</h4>
                            <p>An√°lise completa dos status das AIHs</p>
                        </button>

                        <button onclick="gerarRelatorio('performance-competencias')" class="card-relatorio">
                            <h4>Performance por Compet√™ncias</h4>
                            <p>Comparativo entre compet√™ncias</p>
                        </button>
                    </div>
                </div>

                <div style="margin-bottom: 2rem;">
                    <h3>üìà Relat√≥rios Cl√°ssicos</h3>
                    <div class="relatorios-grid">
                        <button onclick="gerarRelatorio('estatisticas-periodo')" class="card-relatorio">
                            <h4>Estat√≠sticas Gerais</h4>
                            <p>Resumo executivo por per√≠odo</p>
                        </button>

                        <button onclick="gerarRelatorio('acessos')" class="card-relatorio">
                            <h4>Acessos por Usu√°rio</h4>
                            <p>Relat√≥rio de acessos e atividades</p>
                        </button>

                        <button onclick="gerarRelatorio('aprovacoes')" class="card-relatorio">
                            <h4>Status de Aprova√ß√µes</h4>
                            <p>Distribui√ß√£o por status das AIHs</p>
                        </button>

                        <button onclick="gerarRelatorio('analise-preditiva')" class="card-relatorio">
                            <h4>An√°lise Preditiva</h4>
                            <p>Tend√™ncias e previs√µes</p>
                        </button>

                        <button onclick="gerarRelatorio('logs-exclusao')" class="card-relatorio" style="border: 2px solid #dc2626;">
                            <h4 style="color: #dc2626;">üîí Logs de Exclus√£o</h4>
                            <p style="color: #dc2626;">Auditoria de altera√ß√µes na BD (Admin)</p>
                        </button>
                    </div>
                </div>

                <div id="resultadoRelatorio" class="resultado-relatorio"></div>
            </div>
        </div>

        <!-- Modal -->
        <div id="modal" class="modal">
            <div class="modal-content">
                <h3 id="modalTitulo"></h3>
                <p id="modalMensagem"></p>
                <div class="modal-buttons">
                    <button id="modalBtnSim">Sim</button>
                    <button id="modalBtnNao">N√£o</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>