<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Controle de Auditoria de AIH</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Tela Login -->
        <div id="telaLogin" class="tela ativa">
            <div class="login-container">
                <h1>Sistema de Gest√£o de AIH</h1>
                <h2>Controle de Auditoria</h2>
                <form id="formLogin">
                    <input type="text" id="loginUsuario" placeholder="Usu√°rio" required>
                    <input type="password" id="loginSenha" placeholder="Senha" required>
                    <button type="submit">Entrar</button>
                    <a href="#" id="linkCadastrar">Cadastrar novo usu√°rio</a>
                </form>
                <footer class="login-footer">
                    <p>Desenvolvido por Gustavo Cambraia</p>
                    <p>All rights reserved</p>
                    <p>Vers√£o atual: 3.4</p>
                </footer>
            </div>
        </div>

        <!-- Substitua a se√ß√£o do dashboard na TELA PRINCIPAL pelo c√≥digo abaixo -->

<!-- Tela Principal com menu no topo -->
<div id="telaPrincipal" class="tela">
    <header>
        <h1>Sistema de Controle de AIH</h1>
        <div class="user-info">
            <span id="nomeUsuario"></span>
            <button id="btnSair">Sair</button>
        </div>
    </header>

    <!-- Menu Principal no topo -->
    <div class="menu-principal">
        <button class="menu-btn" id="btnInformarAIH">
            <span class="icon">üìù</span>
            <span>Informar AIH</span>
        </button>
        <button class="menu-btn" id="btnBuscarAIH">
            <span class="icon">üîç</span>
            <span>Buscar AIH</span>
        </button>
        <button class="menu-btn" id="btnBackup">
            <span class="icon">üíæ</span>
            <span>Backup/Exportar</span>
        </button>
        <button class="menu-btn" id="btnConfiguracoes">
            <span class="icon">‚öôÔ∏è</span>
            <span>Configura√ß√µes</span>
        </button>
        <button class="menu-btn" id="btnRelatorios">
            <span class="icon">üìä</span>
            <span>Relat√≥rios</span>
        </button>
    </div>

    <!-- O seletor de compet√™ncia ser√° inserido dinamicamente aqui pelo JavaScript -->

    <div class="dashboard">
        <!-- Os cards ser√£o inseridos dinamicamente pelo JavaScript -->
    </div>

    <!-- O resumo financeiro ser√° inserido dinamicamente aqui pelo JavaScript -->
    
    <!-- Rodap√© da tela principal -->
    <footer class="main-footer">
        <p>Desenvolvido por Gustavo Cambraia</p>
        <p>All rights reserved</p>
        <p>Vers√£o atual: 3.4</p>
    </footer>
</div>
        <!-- Tela Informar AIH -->
        <div id="telaInformarAIH" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaPrincipal()">‚Üê Voltar</button>
                <h2>Informar AIH</h2>
            </header>
            <div class="container">
                <form id="formBuscarAIH">
                    <label>N√∫mero da AIH:</label>
                    <input type="text" id="numeroBuscarAIH" required>
                    <button type="submit">Buscar</button>
                </form>
            </div>
        </div>

        <!-- Tela Cadastro AIH -->
        <div id="telaCadastroAIH" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaAnterior()">‚Üê Voltar</button>
                <h2>Cadastrar Nova AIH</h2>
            </header>
            <div class="container">
                <form id="formCadastroAIH">
                    <label>N√∫mero da AIH:</label>
                    <input type="text" id="cadastroNumeroAIH" required readonly>

                    <label>N√∫meros de Atendimento:</label>
                    <div id="atendimentosContainer">
                        <input type="text" class="atendimento-input" placeholder="N√∫mero do atendimento">
                    </div>
                    <button type="button" id="btnAddAtendimento">+ Adicionar Atendimento</button>

                    <label>Compet√™ncia (MM/AAAA):</label>
                    <input type="text" id="cadastroCompetencia" pattern="\d{2}/\d{4}" placeholder="12/2024" required>

                    <label>Valor Inicial:</label>
                    <input type="number" id="cadastroValor" step="0.01" required>

                    <button type="submit">Cadastrar AIH</button>
                </form>
            </div>
        </div>

        <!-- Tela Informa√ß√µes AIH -->
        <div id="telaInfoAIH" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaPrincipal()">‚Üê Voltar</button>
                <h2>Informa√ß√µes da AIH</h2>
            </header>
            <div class="container">
                <div id="infoAIHContent">
                    <!-- Conte√∫do din√¢mico -->
                </div>
                <button id="btnNovaMovimentacao" class="btn-primary">Nova Movimenta√ß√£o</button>
            </div>
        </div>

        <!-- Tela Movimenta√ß√£o -->
        <div id="telaMovimentacao" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaAnterior()">‚Üê Voltar</button>
                <h2>Nova Movimenta√ß√£o</h2>
            </header>
            <div class="container">
                <!-- Status atual da AIH destacado -->
                <div id="statusAtualAIH"></div>

                <!-- Lembrete sobre os status -->
                <div id="lembreteStatus"></div>

                <!-- √Årea de explica√ß√£o da movimenta√ß√£o -->
                <div id="explicacaoMovimentacao"></div>

                <form id="formMovimentacao">
                    <label>Status da AIH:</label>
                    <select id="movStatus" required>
                        <option value="1">1 - Finalizada com aprova√ß√£o direta</option>
                        <option value="2">2 - Ativa com aprova√ß√£o indireta</option>
                        <option value="3">3 - Ativa em discuss√£o</option>
                        <option value="4">4 - Finalizada ap√≥s discuss√£o</option>
                    </select>

                    <label>Tipo de Movimenta√ß√£o:</label>
                    <select id="movTipo" required>
                        <option value="entrada_sus">Entrada na Auditoria SUS</option>
                        <option value="saida_hospital">Sa√≠da para Auditoria Hospital</option>
                    </select>

                    <label>Compet√™ncia:</label>
                    <input type="text" id="movCompetencia" pattern="\d{2}/\d{4}">

                    <label>Valor Atual da Conta:</label>
                    <input type="number" id="movValor" step="0.01" required>

                    <h3>Profissionais Auditores:</h3>
                    <select id="movProfMedicina">
                        <option value="">Selecione - Medicina</option>
                    </select>
                    <select id="movProfEnfermagem">
                        <option value="">Selecione - Enfermagem</option>
                    </select>
                    <select id="movProfFisioterapia">
                        <option value="">Selecione - Fisioterapia</option>
                    </select>
                    <select id="movProfBucomaxilo">
                        <option value="">Selecione - Cirurgi√£o Bucomaxilo</option>
                    </select>

                    <label>Observa√ß√µes:</label>
                    <textarea id="movObservacoes" rows="3" placeholder="Observa√ß√µes sobre esta movimenta√ß√£o (opcional)"></textarea>

                    <div class="glosas-section">
                        <h3>Glosas/Pend√™ncias</h3>
                        <div id="listaGlosas"></div>
                        <button type="button" id="btnGerenciarGlosas">Gerenciar Glosas</button>
                    </div>

                    <div class="form-buttons">
                        <button type="button" id="btnCancelarMovimentacao" class="btn-secondary">Cancelar</button>
                        <button type="submit" class="btn-primary">Salvar Movimenta√ß√£o</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Tela Pend√™ncias -->
        <div id="telaPendencias" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaAnterior()">‚Üê Voltar</button>
                <h2>Gerenciar Pend√™ncias/Glosas</h2>
            </header>
            <div class="container">
                <div id="glosasAtuais"></div>

                <h3>Adicionar Nova Pend√™ncia/Glosa</h3>
                <form id="formNovaGlosa">
                    <input type="text" id="glosaLinha" placeholder="Linha da pend√™ncia/glosa" required>
                    <select id="glosaTipo" required>
                        <option value="">Selecione o tipo de pend√™ncia/glosa</option>
                    </select>
                    <select id="glosaProfissional" required>
                        <option value="">Selecione o profissional</option>
                    </select>
                    <input type="number" id="glosaQuantidade" placeholder="Quantidade" min="1" value="1" required>
                    <button type="submit">Adicionar Pend√™ncia/Glosa</button>
                </form>

                <button id="btnSalvarGlosas" class="btn-primary">Salvar Pend√™ncias e Voltar</button>
            </div>
        </div>

        <!-- Tela Pesquisa -->
        <div id="telaPesquisa" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaPrincipal()">‚Üê Voltar</button>
                <h2>Pesquisar AIH</h2>
            </header>
            <div class="container">
                <form id="formPesquisa">
                    <div class="filtros-grid">
                        <div>
                            <label>N√∫mero AIH:</label>
                            <input type="text" id="pesquisaNumeroAIH" placeholder="Buscar por n√∫mero">
                        </div>

                        <div>
                            <label>Status:</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" value="1"> Finalizada com aprova√ß√£o direta</label>
                                <label><input type="checkbox" value="2"> Ativa com aprova√ß√£o indireta</label>
                                <label><input type="checkbox" value="3"> Ativa em discuss√£o</label>
                                <label><input type="checkbox" value="4"> Finalizada ap√≥s discuss√£o</label>
                            </div>
                        </div>

                        <div>
                            <label>Per√≠odo:</label>
                            <input type="date" id="pesquisaDataInicio">
                            <input type="date" id="pesquisaDataFim">
                        </div>

                        <div>
                            <label>Compet√™ncia:</label>
                            <input type="text" id="pesquisaCompetencia" pattern="\d{2}/\d{4}" placeholder="MM/AAAA">
                        </div>

                        <div>
                            <label>Valor M√≠nimo:</label>
                            <input type="number" id="pesquisaValorMin" step="0.01" placeholder="R$ 0,00">
                        </div>

                        <div>
                            <label>Valor M√°ximo:</label>
                            <input type="number" id="pesquisaValorMax" step="0.01" placeholder="R$ 0,00">
                        </div>

                        <div>
                            <label>Profissional:</label>
                            <select id="pesquisaProfissional">
                                <option value="">Todos os profissionais</option>
                            </select>
                        </div>
                    </div>

                    <button type="submit">Pesquisar</button>
                </form>

                <div id="resultadosPesquisa"></div>
            </div>
        </div>

        <!-- Tela Configura√ß√µes -->
        <div id="telaConfiguracoes" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaPrincipal()">‚Üê Voltar</button>
                <h2>Configura√ß√µes</h2>
            </header>
            <div class="container">
                <div class="config-section">
                    <h3>Gerenciar Profissionais</h3>
                    <div id="listaProfissionais"></div>
                    <form id="formNovoProfissional">
                        <input type="text" id="profNome" placeholder="Nome" required>
                        <select id="profEspecialidade" required>
                            <option value="Medicina">Medicina</option>
                            <option value="Enfermagem">Enfermagem</option>
                            <option value="Fisioterapia">Fisioterapia</option>
                            <option value="Bucomaxilo">Cirurgi√£o Bucomaxilo</option>
                        </select>
                        <button type="submit">Adicionar Profissional</button>
                    </form>
                </div>

                <div class="config-section">
                    <h3>Gerenciar Tipos de Pend√™ncias/Glosas</h3>
                    <div id="listaTiposGlosa"></div>
                    <form id="formNovoTipoGlosa">
                        <input type="text" id="tipoGlosaDescricao" placeholder="Descri√ß√£o do tipo de pend√™ncia/glosa" required>
                        <button type="submit">Adicionar Tipo</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Tela Relat√≥rios -->
        <div id="telaRelatorios" class="tela">
            <header>
                <button class="btn-voltar" onclick="voltarTelaPrincipal()">‚Üê Voltar</button>
                <h2>Relat√≥rios e An√°lises</h2>
            </header>
            <div class="container">
                <!-- Filtros de Per√≠odo -->
                <div class="filtros-relatorio">
                    <h3>Filtros de Per√≠odo</h3>
                    <div class="filtros-grid">
                        <div>
                            <label>Data In√≠cio:</label>
                            <input type="date" id="relatorioDataInicio">
                        </div>
                        <div>
                            <label>Data Fim:</label>
                            <input type="date" id="relatorioDataFim">
                        </div>
                        <div>
                            <label>Compet√™ncia:</label>
                            <input type="text" id="relatorioCompetencia" placeholder="MM/AAAA">
                        </div>
                        <div style="display: flex; align-items: end;">
                            <button onclick="limparFiltrosRelatorio()" style="background: #64748b; padding: 0.75rem 1.5rem;">
                                Limpar Filtros
                            </button>
                        </div>
                    </div>
                    <p style="color: #64748b; font-size: 0.875rem; margin-top: 0.5rem;">
                        üí° Deixe os filtros vazios para gerar relat√≥rios de todos os per√≠odos. Use compet√™ncia OU per√≠odo de datas.
                    </p>
                </div>

                <!-- Relat√≥rios por Per√≠odo -->
                <div class="secao-relatorios">
                    <h3>üìÖ Relat√≥rios por Per√≠odo</h3>
                    <div class="relatorios-grid">
                        <button onclick="gerarRelatorio('tipos-glosa-periodo')" class="relatorio-btn">
                            <span class="relatorio-icon">üìä</span>
                            <h3>Tipos de Glosa Mais Comuns</h3>
                            <p>Glosas mais frequentes no per√≠odo selecionado</p>
                        </button>

                        <button onclick="gerarRelatorio('aihs-profissional-periodo')" class="relatorio-btn">
                            <span class="relatorio-icon">üè•</span>
                            <h3>AIHs Auditadas por Profissional</h3>
                            <p>Quantas AIHs cada profissional auditou</p>
                        </button>

                        <button onclick="gerarRelatorio('glosas-profissional-periodo')" class="relatorio-btn">
                            <span class="relatorio-icon">üìã</span>
                            <h3>Glosas por Profissional</h3>
                            <p>Glosas identificadas por cada auditor no per√≠odo</p>
                        </button>

                        <button onclick="gerarRelatorio('valores-glosas-periodo')" class="relatorio-btn">
                            <span class="relatorio-icon">üí∞</span>
                            <h3>An√°lise Financeira de Glosas</h3>
                            <p>Valores das glosas e diferen√ßas inicial/final</p>
                        </button>

                        <button onclick="gerarRelatorio('estatisticas-periodo')" class="relatorio-btn">
                            <span class="relatorio-icon">üìà</span>
                            <h3>Estat√≠sticas do Per√≠odo</h3>
                            <p>Resumo completo do per√≠odo selecionado</p>
                        </button>
                    </div>
                </div>

                <!-- Relat√≥rios Gerais -->
                <div class="secao-relatorios">
                    <h3>üìä Relat√≥rios Gerais</h3>
                    <div class="relatorios-grid">
                        <button onclick="gerarRelatorio('acessos')" class="relatorio-btn">
                            <span class="relatorio-icon">üë•</span>
                            <h3>Acessos ao Sistema</h3>
                            <p>Hist√≥rico de logins dos usu√°rios</p>
                        </button>

                        <button onclick="gerarRelatorio('glosas-profissional')" class="relatorio-btn">
                            <span class="relatorio-icon">üìã</span>
                            <h3>Glosas por Profissional (Geral)</h3>
                            <p>Todas as glosas por profissional</p>
                        </button>

                        <button onclick="gerarRelatorio('aihs-profissional')" class="relatorio-btn">
                            <span class="relatorio-icon">üè•</span>
                            <h3>AIHs por Profissional (Geral)</h3>
                            <p>Todas as AIHs auditadas por profissional</p>
                        </button>

                        <button onclick="gerarRelatorio('aprovacoes')" class="relatorio-btn">
                            <span class="relatorio-icon">‚úÖ</span>
                            <h3>Estat√≠sticas de Aprova√ß√µes</h3>
                            <p>Distribui√ß√£o geral dos status das AIHs</p>
                        </button>

                        <button onclick="gerarRelatorio('tipos-glosa')" class="relatorio-btn">
                            <span class="relatorio-icon">üìä</span>
                            <h3>Tipos de Glosa (Geral)</h3>
                            <p>Frequ√™ncia geral dos tipos de glosas</p>
                        </button>

                        <button onclick="gerarRelatorio('analise-preditiva')" class="relatorio-btn">
                            <span class="relatorio-icon">üîÆ</span>
                            <h3>An√°lise Preditiva</h3>
                            <p>Tend√™ncias e previs√µes</p>
                        </button>
                    </div>
                </div>

                <div id="resultadoRelatorio"></div>
            </div>
        </div>

        <!-- Modal -->
        <div id="modal" class="modal">
            <div class="modal-content">
                <h3 id="modalTitulo"></h3>
                <p id="modalMensagem"></p>
                <div class="modal-buttons">
                    <button id="modalBtnSim">Sim</button>
                    <button id="modalBtnNao">N√£o</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>